{% extends "base.html" %}

{% block leagues_menu %}
    {% for league in leagues %}
        <li class="nav-item">
            <a class="nav-link {% if league == current_league %}active{% endif %}"
               href="/?league={{ league.slug }}">
                {{ league.name }}
            </a>
        </li>
    {% endfor %}
{% endblock %}

{% block content %}

<h2 class="mb-4">{{ current_league.name }}</h2>

<!-- Турнирная таблица -->
<h3>Турнирная таблица</h3>

<table class="table table-striped table-bordered">
    <thead class="table-dark">
        <tr>
            <th>Команда</th>
            <th>М</th>
            <th>В</th>
            <th>Н</th>
            <th>П</th>
            <th>Забито</th>
            <th>Пропущено</th>
            <th>Разница</th>
            <th>Очки</th>
        </tr>
    </thead>
    <tbody>
        {% for row in table %}
            <tr>
                <td>{{ row.team.name }}</td>
                <td>{{ row.matches }}</td>
                <td>{{ row.wins }}</td>
                <td>{{ row.draws }}</td>
                <td>{{ row.loses }}</td>
                <td>{{ row.goals_scored }}</td>
                <td>{{ row.goals_conceded }}</td>
                <td>{{ row.difference }}</td>
                <td>{{ row.points }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="8" class="text-center">Нет данных</td></tr>
        {% endfor %}
    </tbody>
</table>

<hr class="my-4">

<!-- Статистика игроков -->
<h3>Статистика игроков</h3>

<table class="table table-striped table-bordered">
    <thead class="table-dark">
        <tr>
            <th>Игрок</th>
            <th>Команда</th>
            <th>Матчи</th>
            <th>Голы</th>
            <th>Ассисты</th>
            <th>Г + А</th>
        </tr>
    </thead>
    <tbody>
        {% for p in players_stats %}
            <tr>
                <td>{{ p.player.name }} {{ p.player.surname }}</td>
                <td>{{ p.player.team }}</td>
                <td>{{ p.matches }}</td>
                <td>{{ p.goals }}</td>
                <td>{{ p.assists }}</td>
                <td>{{ p.goals|add:p.assists }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="5" class="text-center">Нет данных</td></tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
